{% extends "base.html" %}
{% block content %}
<div class="container py-4">
  <h2 class="mb-3">Bookings</h2>

  <!-- responsive wrapper -->
  <div class="table-responsive">
    <table class="table table-striped table-hover align-middle mt-3 mb-0">
      <thead class="table-light">
        <tr>
          <th>#</th><th>Name</th><th>Suite</th><th>Check-in</th><th>Check-out</th><th>Status</th><th>Created</th><th></th>
        </tr>
      </thead>
      <tbody>
        {% for b in page_obj.items %}
        <tr>
          <td class="fw-semibold">{{ b.id }}</td>
          <td>
            {{ b.full_name }}<br>
            <small class="text-muted">{{ b.email }}</small>
          </td>
          <td>{{ b.suite }}</td>
          <td><span class="d-inline-block text-truncate" style="max-width:120px;">{{ b.checkin }}</span></td>
          <td><span class="d-inline-block text-truncate" style="max-width:120px;">{{ b.checkout }}</span></td>
          <td>
            {% if b.status == 'pending' %}
              <span class="badge bg-secondary">Pending</span>
            {% elif b.status == 'confirmed' %}
              <span class="badge bg-success">Confirmed</span>
            {% else %}
              <span class="badge bg-danger">Cancelled</span>
            {% endif %}
          </td>
          <td><small class="text-muted">{{ b.created_at.strftime('%Y-%m-%d %H:%M') }}</small></td>
          <td class="text-end">
            <a class="btn btn-sm btn-outline-primary" href="{{ url_for('admin_booking_detail', booking_id=b.id) }}">Manage</a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- simple pagination -->
  <nav aria-label="page" class="mt-3">
    <ul class="pagination justify-content-center flex-wrap">
      {% if page_obj.has_prev %}
      <li class="page-item"><a class="page-link" href="{{ url_for('admin_dashboard', page=page_obj.prev_num) }}">Previous</a></li>
      {% else %}
      <li class="page-item disabled"><span class="page-link">Previous</span></li>
      {% endif %}
      <li class="page-item disabled"><span class="page-link">Page {{ page_obj.page }} / {{ page_obj.pages }}</span></li>
      {% if page_obj.has_next %}
      <li class="page-item"><a class="page-link" href="{{ url_for('admin_dashboard', page=page_obj.next_num) }}">Next</a></li>
      {% else %}
      <li class="page-item disabled"><span class="page-link">Next</span></li>
      {% endif %}
    </ul>
  </nav>
</div>

{% endblock %}
